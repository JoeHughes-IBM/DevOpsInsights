---

copyright:
  years: 2016, 2017
lastupdated: "2017-04-07"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

# ポリシーとルールの作成
{: #policies_and_rules}

ポリシーは、デリバリー・パイプラインの中のゲートを制御するルールの集まりです。
特定のゲートにおいて制定されているポリシーをコードが満たしていない、または超えていない場合、リスクのある変更版がリリースされることがないよう、デプロイメントが制止されます。


ポリシーは {{site.data.keyword.DRA_short}} で定義します。
ポリシーは、{{site.data.keyword.DRA_short}} が含まれている {{site.data.keyword.Bluemix_notm}} 組織 (org) 内に作成されます。
同じ org 内のすべてアプリケーションが、そのポリシーを使用できます。
 

## ポリシーの作成
{: #create_policies}

ポリシーを作成するには、


1. 左側のナビゲーションから、**「設定」**をクリックします。


2. **「ポリシー」**をクリックします。


3. **「ポリシーの作成 (Create Policy)」**をクリックしてから、新しいポリシーの名前と説明を入力します。


4. **「次へ」**をクリックします。

4. 以下のようにして、1 つ以上のルールをポリシーに追加します。
  1. **「ルールをポリシーに追加する (Add Rule to Policy)」**をクリックします。
  2. ルールのタイプを選択します。
  3. ルールの詳細情報と条件を入力します。
  4. **「保存」**をクリックします。

5. ルールをポリシーに追加し終えたら、**「完了」**をクリックします。

## ルールの作成
{: #creating_rules}

ルールは、ポリシーで成功か失敗かを判断するために使用する基準を定義します。
例えば、80% の単体テスト成功を求める単体テスト・ルールと、100% コード・カバレッジを求めるテスト・カバレッジ・ルールを含む「単体テストとテスト・カバレッジ」ポリシーを作成するとします。
パイプラインの中にこのルールを参照するゲートを追加すると、これらのルールの両方を満たさないビルドは、このゲートより先には進めなくなります。 

テストに重大のマークを付けることにより、どんな場合であろうと成功を必須とすることができます。
ルールを作成するには、ポリシーを選択して**「ルールをポリシーに追加する (Add Rule to Policy)」**をクリックします。
 

### 機能検証テストのルールの作成
{: #criteria_fvt}

1. 説明を入力して形式を選択します。

2. 成功と宣言するのに必要なテスト・ケースの合格パーセンテージを指定します。

3. クリティカルなテスト・ケースを定義します。

4. テスト・ケースの回帰をモニターするには、**「テスト・ケースの回帰のモニター (Monitor for test case regression)」**チェック・ボックスを選択します。

5. **「保存」**をクリックします。


### 単体テストのルールの作成
{: #criteria_ut}

1. 説明を入力して形式を選択します。

2. 成功と宣言するのに必要なテスト・ケースの合格パーセンテージを指定します。

3. クリティカルなテスト・ケースを定義します。

4. テスト・ケースの回帰をモニターするには、**「テスト・ケースの回帰のモニター (Monitor for test case regression)」**チェック・ボックスを選択します。

5. **「保存」**をクリックします。


### コード・カバレッジのルールの作成
{: #criteria_codecoverage}

1. 説明を入力して形式を選択します。

2. 成功と宣言するのに必要なコード・カバレッジのパーセンテージを指定します。

3. コード・カバレッジの回帰をモニターするには、**「テスト・ケースの回帰のモニター (Monitor for test case regression)」**チェック・ボックスを選択します。

4. **「保存」**をクリックします。

### 静的セキュリティー・スキャン・ルールの作成
{: #criteria_static}

{{site.data.keyword.DRA_short}} を IBM Application Security on Cloud に統合して、静的コードと動的アプリのスキャンを実行することができます。
Application Security on Cloud について詳しくは、[公式のドキュメンテーション](/docs/services/ApplicationSecurityonCloud/index.html)を参照してください。


1. 説明を入力します。


2. ルールによって許容される高、中、低の重大度の問題の最大数を指定します。
 

3. **「保存」**をクリックします。

### 動的セキュリティー・スキャン・ルールの作成
{: #criteria_dynamic}

{{site.data.keyword.DRA_short}} を {{site.data.keyword.appseccloudfull}} に統合して、動的アプリ・スキャンを実行することができます。
Application Security on Cloud について詳しくは、[公式のドキュメンテーション](/docs/services/ApplicationSecurityonCloud/index.html)を参照してください。


1. 説明を入力します。


2. ルールによって許容される高、中、低の重大度の問題の最大数を指定します。
 

3. **「保存」**をクリックします。
